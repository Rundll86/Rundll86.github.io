(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{317:function(t,e,r){},335:function(t,e,r){"use strict";r(317)},342:function(t,e,r){"use strict";r.r(e);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r(118);function i(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function o(t,e,r){return(e=i(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(116),r(14),r(20),r(62),r(40);class s{constructor(t,e,r="",n="string"){o(this,"content",""),o(this,"type","text"),o(this,"value",""),o(this,"inputType","string"),this.content=t,this.type=e,void 0!==r&&(this.value=r),void 0!==n&&(this.inputType=n)}}const a={inputTypeCastConstructor:{string:String,number:Number,bool:Boolean,menu:String,angle:Number,color:String,"hat-paramater":String},acceptedInputType:["string","number","bool","menu","angle","color","hat-paramater"],regex:/(\[.*?\])|(\$.*?;)/g,split(t){const e=t.match(this.regex)||[];return{text:t.split(this.regex).filter(t=>void 0!==t).filter((t,e)=>e%2==0),arg:e.filter(Boolean).map(t=>t.slice(1,-1))}},parsePart(t){const e=[],r=this.split(t);return r.text.forEach((t,n)=>{t&&(e.push(new s(t,"text")),r.arg.length>n&&e.push(new s(this.parseName(r.arg[n]),"input",this.parseDefaultValue(r.arg[n]),this.parseType(r.arg[n]))))}),e},hasType:t=>t.includes(":"),hasDefaultValue:t=>t.includes("="),parseType(t){if(!this.hasType(t))return"string";const e=t.split(":");e.shift();let r=e.join(":");if(this.hasDefaultValue(t)&&(r=r.split("=",1)[0]),!this.acceptedInputType.includes(r))throw new Error("Invalid input type: "+r);return r},parseDefaultValue(t){if(!this.hasDefaultValue(t))return;const e=t.split("=").pop();return this.inputTypeCastConstructor[this.parseType(t)](e)},parseName:t=>t.split(/[:=]/)[0]};var u={name:"ScratchBlock",mounted(){this.parsed=a.parsePart(this.$slots.default[0].text),this.$slots.default[0].text="",requestAnimationFrame(()=>{document.querySelectorAll("input").forEach(t=>this.autoWidthInput({target:t}))})},data:()=>({parsed:[]}),props:{color:{type:String,default:"#ff0000"}},methods:{darken(t,e){const r=this.hexToRgb(t);for(let t=0;t<3;t++)r[t]=Math.floor(r[t]-r[t]*e);return"#"+r.map(t=>t.toString(16).padStart(2,"0")).join("")},hexToRgb(t){let e=[];if(!/^#?[0-9A-Fa-f]{6}$/.test(t))throw new Error("Invalid hex color string");if(e=(t=t.replace("#","")).match(/../g)||[],e.length<3)throw new Error("Invalid hex color string");return[parseInt(e[0],16),parseInt(e[1],16),parseInt(e[2],16)]},autoWidthInput(t){let{target:e}=t,r=document.createElement("span");r.style.visibility="hidden",r.style.whiteSpace="pre",r.style.font=window.getComputedStyle(e).font,r.textContent=e.value,document.body.appendChild(r),e.style.width=r.offsetWidth+20+"px",document.body.removeChild(r)}}},l=(r(335),r(25)),p=Object(l.a)(u,(function(){var t=this,e=t._self._c;return e("div",[e("span",{staticClass:"tip"},[t._v("⚠️ <ScratchBlock>组件正在实验中，可能存在一些问题。")]),e("br"),t._v(" "),e("span",{staticClass:"block",style:{backgroundColor:t.color,borderColor:t.darken(t.color,.4)}},[e("span",t._l(t.parsed,(function(r){return e("span",["text"===r.type?e("span",{staticClass:"text"},[t._v(t._s(r.content))]):t._e(),t._v(" "),"input"===r.type?e("span",[e("input",{staticClass:"inputer",attrs:{type:"number"===r.inputType?"number":"text"},domProps:{value:r.value},on:{input:t.autoWidthInput}})]):t._e()])})),0),t._v(" "),t._t("default")],2)])}),[],!1,null,"3d0e0ba8",null);e.default=p.exports}}]);